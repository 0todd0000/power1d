name: build documentation and publish

on:
    push:
        branches: [ multi ]

jobs:
    publish:
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v2
            - uses: actions/setup-python@v4
            with:
                python-version: '3.9'
            - run: pip install numpy scipy matplotlib
            - name: build documentation
              run: make html
            - run: touch docs/.nojekyll
            - uses: cpina/github-action-push-to-another-repository@main
            env:
                SSH_DEPLOY_KEY: ${{ secrets.SSH_DEPLOY_KEY }}
            with:
                source-directory: 'docs'
                destination-github-username: '0todd0000'
                destination-repository-name: 'spm1d'
                user-email: 0todd0@gmail.com
                target-branch: gh-pages
                target-directory: power1d